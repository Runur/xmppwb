# Example configuration for bridging XMPP with RocketChat.
#
# This would connect to the XMPP MUC "conference1" using the account
# "alice" and relay messages to and from this MUC to a RocketChat-instance,
# as specified by the webhooks. The webhooks need to be configured in
# RocketChat aswell.
# 
# Refer to the README for detailed documentation of all settings.
xmpp:
  jid: alice@example.com
  password: "<bot-password>"

  # A list of all MUCs that should be available to the bridges defined later.
  mucs:
    - jid: conference1@conference.example.com
      nickname: WebhookBridge
      # password: "<muc-password>"

incoming_webhook_listener:
  # The outgoing webhook URL that must be set in Rocket.Chat is of the form
  # "http://{bind_adress}:{port}/".
  bind_address: "127.0.0.1"
  port: 5000

bridges:
  - xmpp:
      - muc: conference1@conference.example.com
      # - normal: bob@example.com
      # - relay_all_normal: true

    webhooks:
      outgoing:
        # Note: "Outgoing from this bridge" means "Incoming to RocketChat",
        # so this URL refers to the incoming webhook URL of RocketChat.
        - url: http://127.0.0.1:8065/hooks/<yourtoken>
          override_username: "{nick}"
          use_attachment_formatting: true
      incoming:
        # Note: "Incoming to this bridge" means "Outgoing from RocketChat",
        # so this token must match the token in the outgoing webhook from
        # RocketChat.
        - token: <your-token3>

# vim: syntax=yaml